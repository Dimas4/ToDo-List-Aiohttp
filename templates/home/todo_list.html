{% extends 'base.html' %}

{% block links %}
    <link rel="stylesheet" type="text/css" href="{{ static('css/style_to_do.css') }}">
{% endblock %}

{% block content %}

    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="todolist not-done">
                 <h1>Todos</h1>
                    <form action="/note/{{id}}" method="POST">
                        <input id="name" name="name" type="text" class="form-control add-todo" placeholder="Add todo">
                        <br>
                        <button class="btn btn-outline-success" type="submit">Add</button>
                    </form>
                        <hr>
                        <ul id="sortable" class="list-unstyled">
                        <div id="todo_list_id">
                            {% for todo in todo_list %}
                                 <li>
                                    <p style="font-size: 24px;">{{todo.name}}</p>
                                     <a style="margin-top: 5px;" class="btn btn-sm btn-outline-danger" href="/note/delete/{{ id }}/{{todo._id}}">Delete</a>
                                </li>
                                <hr>
                            {% endfor %}
                        </div>

                    </ul>

                </div>
            </div>
        </div>
    </div>
    	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

	<script>
		$(document).ready(function () {
			$('form').on('submit', function (event) {
				$.ajax({
					data: {
						name : $('#name').val(),
					},
					type: 'POST',
					url: '/note/{{ id }}'
				})
					.done(function (data) {
					   $('#todo_list_id').prepend(" <li>\n" +
                           "      <p style=\"font-size: 24px;\">"+data.answer.name+"</p>\n" +
                           "      <a style=\"margin-top: 5px;\" class=\"btn btn-sm btn-outline-danger\" href=\"/note/delete/"+data.answer.note_id+"/"+data.answer._id+"\">Delete</a>\n" +
                           " </li><hr>").show();

					})
				event.preventDefault();
			})
		})
	</script>
	<script src="{{ static('js/js_to_do.js') }}"></script>
{% endblock %}
